common-header: &common-header
  type: object

  properties: &common-header-props
    source:
      $ref: ./data-provenance.yaml

    default-emergency-durations:
      $ref: ./array-max-emergency-durations.yaml#/emergency-durations
    power-system-resources:
      $ref: ./array-max-monitored-elements.yaml#/named-power-system-resources

  required:
    - source
    - default-emergency-durations
    - power-system-resources
  additionalProperties: false

real-time-proposal-header:
  <<: *common-header
  description: |

    Populated by the Ratings Provider in a request to submit real-time ratings.
    The Clearinghouse implementation should record this information,
    and the detail limits snapshot should should reflect the
    appropriate metadata from the
    Clearinghouse Provider's perspective.

forecast-proposal-header:
  <<: *common-header
  description: |

    Populated by the Ratings Provider in a request to submit forecast ratings.
    The Clearinghouse implementation should record this information,
    and the detail limits snapshot should should reflect the
    appropriate metadata from the
    Clearinghouse Provider's perspective.

  properties:
    <<: *common-header-props
    begins: &begins
      description: |

        RFC 3339 date-time string with *no fractional seconds component* that
        must share the value of `period-start` for each individual resource
        proposal, identifying the appropriate operational window for this
        proposal.

      type: string
      format: date-time
      maxLength: 25
      example: '2025-07-12T03:00:00-05:00'

  required:
    - begins
    - source
    - default-emergency-durations
    - power-system-resources

forecast-snapshot-header:
  description: Details about the snapshot provided by the Clearinghouse provider.
  properties:
    last-updated:
      $ref: ./timestamp.yaml
    begins:
      <<: *begins
      description: |

        RFC 3339 date-time string with *no fractional seconds component* that
        Nominates the operational window of this snapshot.

    snapshot-provenance:
      $ref: ./data-provenance.yaml
    power-system-resources:
      $ref: ./array-max-monitored-elements.yaml#/named-power-system-resources
    default-emergency-durations:
      $ref: ./array-max-emergency-durations.yaml#/emergency-durations
  required:
    - begins
    - last-updated
    - snapshot-provenance
    - power-system-resources

real-time-snapshot-header:
  description: Details about the snapshot provided by the Clearinghouse provider.
  properties:
    last-updated:
      $ref: ./timestamp.yaml
    snapshot-provenance:
      $ref: ./data-provenance.yaml
    power-system-resources:
      $ref: ./array-max-monitored-elements.yaml#/named-power-system-resources
    default-emergency-durations:
      $ref: ./array-max-emergency-durations.yaml#/emergency-durations
  required:
    - last-updated
    - snapshot-provenance
    - power-system-resources

seasonal-proposal-header:
  <<: *common-header
  description: Describes the contents of the seasonal proposal.
  properties: &seasonal-props
    <<: *common-header-props
    default-seasonal-schedule:
      properties:
        schedule:
          type: array
          minItems: 4 # min of four seasons per 881
          maxItems: 240 # monthly "seasons" for twenty years
          items:
            type: object
            properties:
              season-name:
                $ref: ./season-name.yaml
              begins:
                $ref: ./period-start.yaml
            required:
              - season-name
              - begins
        ends:
          $ref: ./period-start.yaml
        day-night:
          $ref: ./day-night.yaml
      required:
        - schedule
        - ends

seasonal-proposal-header-slim:
  <<: *common-header
  properties:
    <<: *seasonal-props
    limit-type:
      $ref: ./limit.yaml

  required:
    - source
    - default-emergency-durations
    - power-system-resources
    - default-seasonal-schedule
    - limit-type
